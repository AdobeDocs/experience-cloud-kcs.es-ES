---
title: "Adobe Experience Manager: Ejemplos de análisis de request.log"
description: Descripción
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: “KCS”
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Nobuhiro Hashimoto
article-created-date: "1/24/2023 5:01:17 AM"
article-published-by: Nobuhiro Hashimoto
article-published-date: "1/24/2023 12:09:25 PM"
version-number: 1
article-number: KA-21309
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=a33bb020-a49b-ed11-aad1-6045bd006239"
source-git-commit: afded50ce53d99e1170dc822f940f879cfaea426
workflow-type: tm+mt
source-wordcount: '978'
ht-degree: 1%

---

# Adobe Experience Manager: Ejemplos de análisis de request.log

## Descripción {#description}


El archivo AEM request.log contiene información útil, como el tiempo de respuesta, para analizar los problemas de rendimiento. A continuación se muestra una lista de ejemplos de análisis que utilizan comandos Linux (incluidos algunos comandos externos).

<b>Entornos</b>
AEM 6.5, Linux (Bash)


## Resolución {#resolution}

Tabla de contenido:<br><br>
<b>Introducción</b>
  El formato de request.log

<b>Preparación</b>
  Paso 1. Paso 2 de limpieza de datos. Hora de reinicio Paso 3. Número de accesos por hora Paso 4. Paso 5 de procesamiento simultáneo máximo. Dividir un archivo de registro Paso 6. Combinación de registros de solicitud y registros de respuesta

<b>Ejemplos de análisis</b>
  Ejemplo 1. Los accesos más pesados son el Ejemplo 2. Accede a la respuesta que falta Ejemplo 3. Acceso lento Ejemplo 4. Datos de series temporales del tiempo de respuesta Ejemplo 5. Mínimo, medio (promedio), mediana, tiempo de respuesta máximo Ejemplo 6. Número de accesos por periodo Ejemplo 7. Número de estados de respuesta por periodo Ejemplo 8. Ejemplo 9 de direcciones URL más frecuentes. access.log registra un registro request.log

<b>Conclusión</b>

<br>Introducción<br><br>El formato de request.log<br><br>
AEM 6.5 genera request.log en el siguiente formato de forma predeterminada. Debido a una limitación del sistema, las líneas de comandos de este artículo se muestran como imágenes en lugar de texto sin formato.

Ejemplo de request.log:
![](assets/e51bfd97-dd9b-ed11-aad1-6045bd006793.png)





En este artículo, me refiero a una línea con &quot;-&quot; como &quot;registro de solicitud&quot;. Una línea con &quot;-&quot; es un &quot;registro de respuesta&quot;.

<b>Registro de solicitud</b>
  Cuando AEM recibe una solicitud, se registra un registro de solicitud. Contiene la fecha y la hora de recepción, el ID de solicitud, el método de solicitud y la dirección URL.

<b>Registro de respuestas</b>
  Cuando AEM responde a una solicitud, se registra un registro de respuesta. Contiene la fecha y la hora de respuesta, el ID de solicitud, el código de estado, el Tipo de contenido y el tiempo de respuesta (en milisegundos).

Consulte también el manual correspondiente: https://experienceleague.adobe.com/docs/experience-manager-65/deploying/configuring/monitoring-and-maintaining.html?lang=en#interpreting-the-request-log

<br>Preparación<br><br>Paso 1. Limpieza de datos<br><br>
Antes de sumergirse en el análisis de request.log, es importante estandarizar los registros de registro.

![](assets/2a1adef4-dd9b-ed11-aad1-6045bd006793.png)





El primer comando sed elimina un espacio adicional en Content-Type de registros de respuesta para evitar una separación de campos incorrecta con el espacio en blanco. El comando ruby convierte el formato de fecha a ISO 8601. El comando ruby también separa la fecha y la hora con espacio en blanco en lugar de dos puntos.

<br>Paso 2. Hora de reinicio<br><br>
Al reiniciar AEM y una instalación de Service Pack se restablece el ID de solicitud de request.log. Los registros de solicitud con ID de solicitud = 0 indican que podría haber este tipo de operaciones.

![](assets/777fcc1e-de9b-ed11-aad1-6045bd006793.png)













En el ejemplo anterior, los ID de solicitud se restablecieron a 0 a las 13:08:49と13:26:13.

<br>Paso 3. Número de accesos por hora<br><br>
Cuente el número de accesos por hora y el intervalo de tiempo de request.log.

![](assets/712fae49-de9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br>
<br>Paso 4. Máximo procesamiento simultáneo<br><br>
El número de procesamiento simultáneo ayuda a adivinar la carga del servidor de AEM.

![](assets/7b359b5c-de9b-ed11-aad1-6045bd006793.png)







De forma predeterminada, el número máximo de conexiones simultáneas para Jetty en AEM está establecido en 200. Se produce un retraso en la liberación del socket después de completar la respuesta. Cuando el número de procesos simultáneos supera los 170 aproximadamente, no puede aceptar nuevas solicitudes.

<br>Paso 5. Dividir un archivo de registro<br><br>
El ID de solicitud de request.log se restablece cuando se reinicia AEM o se instala un Service Pack. Debido a este comportamiento, el análisis puede ser incorrecto cuando un request.log contiene estas operaciones. Para realizar un análisis preciso y reducir el tamaño de archivo que se gestiona a la vez, divida el archivo request.log usando registros de solicitud con el ID de solicitud = 0.

![](assets/a342906e-de9b-ed11-aad1-6045bd006793.png)













<br>Paso 6. Combinación de registros de solicitud y registros de respuesta<br><br>
La combinación de registros de solicitud y respuesta por ID de solicitud facilita la identificación cuando se inician problemas de rendimiento. Utilizaré este archivo de registro combinado en los ejemplos posteriores.

![](assets/e3848b8c-de9b-ed11-aad1-6045bd006793.png)







El último comando sed agrega una respuesta ficticia a los registros de solicitud que no tienen un registro de respuesta correspondiente. También puede haber registros de respuesta sin registros de solicitud. Pero son ignorables pues normalmente no son un tema de investigación.

El archivo de registro combinado debe tener este aspecto:

![](assets/79f3829e-de9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br>
<br>Ejemplos de análisis<br><br>Ejemplo 1. Los accesos más intensos<br><br>
Ordene el archivo de registro combinado por tiempo de respuesta en orden descendente, incluidos los accesos sin respuesta.

![](assets/50d9b9da-de9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br> <br><br>
<br>Ejemplo 2. Accede a la respuesta que falta<br><br>
Extraer obtiene acceso sin sus registros de respuesta correspondientes usando el tiempo de respuesta ficticio.

![](assets/7bf0beed-de9b-ed11-aad1-6045bd006793.png)







Si el tiempo de recepción de accesos sin respuesta está correlacionado con un aumento en la carga del servidor, estos accesos pueden haber desencadenado problemas de rendimiento.

![](assets/4c86bdff-de9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br>
<br>Ejemplo 3. Acceso lento<br><br>
Extraer accesos que tardaron más de 10 segundos.

![](assets/028e0518-df9b-ed11-aad1-6045bd006793.png)











Cuando el número de visitas sea demasiado alto, reemplace 0-9{5} con 0-9{6} en el comando grep para reducir a accesos que tardaron más de 100 segundos.

<br>Ejemplo 4. Datos de series temporales del tiempo de respuesta<br><br>
Para crear gráficos, resulta útil extraer únicamente la marca de tiempo y el tiempo de respuesta de los datos.

![](assets/e200d731-df9b-ed11-aad1-6045bd006793.png)















Omitir los accesos que respondieron inmediatamente hace que los datos sean más eficientes. El siguiente ejemplo extrae el acceso que tardó más de un segundo.

![](assets/ec4bd13d-df9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br>
<br>Ejemplo 5. Mínimo, media (media), mediana, tiempo de respuesta máximo<br><br>


![](assets/523f6d50-df9b-ed11-aad1-6045bd006793.png)















El ejemplo anterior utiliza el comando datamash (https://www.gnu.org/software/datamash/) para el procesamiento estadístico. Si el registro contiene accesos sin respuesta, el valor ficticio influirá en el resultado.

<br>Ejemplo 6. Número de accesos por periodo<br><br>
Cuente el número de accesos por diez minutos. El resultado ayuda a determinar si el tráfico grande provocó un problema de rendimiento.

![](assets/16ffe970-df9b-ed11-aad1-6045bd006793.png)







El siguiente ejemplo reduce los datos a solicitudes de POST solamente. Un caso de uso típico es determinar si hay una concentración de creación o replicación de contenido en el nivel de publicación.

![](assets/9447dd7c-df9b-ed11-aad1-6045bd006793.png)


<br><br> <br><br> <br><br>
<br>Ejemplo 7. Número de estados de respuesta por periodo<br><br>
Cree una tabla del número de cada estado de respuesta por diez minutos con el comando datamash.

![](assets/8a91d788-df9b-ed11-aad1-6045bd006793.png)
<br><br> <br><br> <br><br> <br><br>
<br>Ejemplo 8. Direcciones URL más frecuentes<br><br>
Imprima las tres URL más visitadas a las que se accedió con mayor frecuencia cada diez minutos.

![](assets/a04efc9a-df9b-ed11-aad1-6045bd006793.png)


<br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br> <br><br>
<br>Ejemplo 9. access.log registra un registro request.log<br><br>
Busque en access.log registros que correspondan a un ID de solicitud determinado.

![](assets/891a02ad-df9b-ed11-aad1-6045bd006793.png)











Si se produjeron varios accesos a la misma dirección URL al mismo tiempo, el resultado muestra varios registros access.log para un único ID de solicitud.

<br>Conclusión<br><br>
Espero que los ejemplos de este artículo le ayuden a analizar sus problemas de rendimiento.

Los ejemplos enumerados han sido probados en CentOS 7.5 y Ubuntu 22.04LTS, pero es posible que no funcionen según lo esperado en función de su entorno, como versiones diferentes o variaciones de los comandos. Por favor, ajústelas a los comandos instalados en su entorno.


