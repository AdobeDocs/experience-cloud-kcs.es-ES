---
title: "¿Qué solicitudes AEM caché de Dispatcher?"
description: Descripción
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS, AEM Dispatcher, caché, AEM, petición HTTP"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Nayanika Chakravarty
article-created-date: "3/27/2023 2:54:13 AM"
article-published-by: Nayanika Chakravarty
article-published-date: "3/27/2023 4:28:42 AM"
version-number: 6
article-number: KA-17497
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=9a35dfa5-4acc-ed11-b597-6045bd006b4b"
source-git-commit: ec5b86220d7152eab70588a8ff559e638bf58047
workflow-type: tm+mt
source-wordcount: '445'
ht-degree: 7%

---

# ¿Qué solicitudes AEM caché de Dispatcher?

## Descripción {#description}


<b>Entorno</b>

AEM Dispatcher 4.3.3

<b>Problema</b>

Este artículo determina por qué Dispatcher AEM no está almacenando en caché la solicitud/respuesta HTTP.


## Resolución {#resolution}


La documentación cubre los escenarios más importantes que afectan a la capacidad de caché de las solicitudes y respuestas que pasan por el módulo AEM Dispatcher. No se cubren todas las reglas de caché.

<b>Reglas de solicitud y almacenamiento en caché HTTP</b>

Para que Dispatcher pueda almacenar en caché una solicitud HTTP, debe cumplir las siguientes reglas:

1. La dirección URL es absoluta (no funciona con . o ...), tiene una extensión de archivo y el nombre de archivo de la URL funciona como un archivo en el sistema de archivos.

   Mensajes de registro relacionados:


   ```
   URI not canonical: %s.
   
   Unable to map URI to file: %s.
   
   cache file path too long
   
   temporary file path too long
   
   request URL has no extension
   ```



   Ejemplos:


   | `/content/test` | `not cached` |
   | --- | --- |
   | `/content/test.html` | `cached` |


2. No tiene barras oblicuas después de la primera extensión de archivo.

   Mensajes de registro relacionados:


   ```
   request URL has trailing slash
   ```



   Ejemplos:


   | `/content/test.html/` | `not cached` |
   | --- | --- |
   | `/content/test.html/foo.jpg` | `not cached` |
   | `/content/test.html` | `cached` |


3. Utiliza el método de GET HTTP o HEAD.

   Mensajes de registro relacionados:


   ```
   request method is neither GET nor HEAD
   ```



   Ejemplos:


   | `HEAD /content/test.html HTTP/1.1` | `cached` |
   | --- | --- |
   | `GET /content/dam/test.jpg HTTP/1.1` | `not cached` |
   | `POST /content/test.html HTTP/1.1` | `not cached` |


4. La solicitud es denegada por /CACHE = /RULES definido en el dispatcher. CUALQUIER CONFIGURACIÓN DE LA GRANJA.


   Mensajes de registro relacionados:


   ```
   URI not  in cache rules: %s request URL not in cache rules
   ```



   Ejemplos:


   | Farm tiene /cache = /rules y se recibe una solicitud para <b>/content/test.html</b><br><br><b>/cache</b><br><br><b>{</b><br><br><b>  ...</b><br><br><b>  /rules</b><br><br><b>  {</b><br><br><b>    /0001 {</b><br><br><b>      type &quot;deny&quot;</b><br><br><b>      glob &quot;\*&quot;</b><br><br><b>      }</b><br><br><b>  }</b><br><br><b>}</b> | no almacenado |
   | --- | --- |
   | Farm tiene /cache = /rules y se recibe una solicitud para <b>/content/test.html</b><br><br><b>/cache</b><br><br><b>{</b><br><br><b>  ...</b><br><br><b>  /rules</b><br><br><b>  {</b><br><br><b>    /0001 {</b><br><br><b>      type &quot;allow&quot;</b><br><br><b>      glob &quot;\*&quot;</b><br><br><b>      }</b><br><br><b>  }</b><br><br><b>}</b> | en caché |


5. La solicitud HTTP no contiene un encabezado de autorización o contiene el encabezado, pero /ALLOWAUTHORIZED se establece en 1 en la CONFIGURACIÓN FARM.


   Mensajes de registro relacionados:


   ```
   request contains authorization
   ```



   Ejemplos:


   | <br><br>    ```<br>    HTTP Request:<br>             GET /content/test.html HTTP/1.1<br>             Authorization: Basic YWxhZGRpbjpvcGVuc2VzYW1l<br>             dispatcher.any farm /cache = /allowAuthorized configuration:<br>             /cache {<br>              /allowAuthorized “0”<br>             }<br>    ```<br><br> | `not cached` |
   | --- | --- |
   | <br><br>    ```<br>    HTTP Request:<br>             GET /content/test.html HTTP/1.1<br>             Authorization: Basic YWxhZGRpbjpvcGVuc2VzYW1l<br>             dispatcher.any farm /cache = /allowAuthorized configuration:<br>             /cache {<br>              /allowAuthorized “1”<br>             }<br>    ```<br><br> | `cached` |


6. La solicitud HTTP contiene un token de inicio de sesión o una cookie de autorización en el encabezado de la cookie, o bien contiene (o ambos) de esas cookies y /ALLOWAUTHORIZED está establecido en 1 en la CONFIGURACIÓN FARM.


   Mensajes de registro relacionados:


   ```
   request contains authorization
   ```



   Ejemplos:


   | <br><br>    ```<br>    HTTP Request:<br>             GET /content/test.html HTTP/1.1<br>             Cookie: login-token=...<br>             dispatcher.any farm /cache = /allowAuthorized configuration:<br>             /cache {<br>              /allowAuthorized “0”<br>             }<br>    ```<br><br> | `not cached` |
   | --- | --- |
   | <br><br>    ```<br>    HTTP Request:<br>             GET /content/test.html HTTP/1.1<br>             Cookie: authorization= YWxhZGRpbjpvcGVuc2VzYW1l<br>             dispatcher.any farm /cache = /allowAuthorized configuration:<br>             /cache {<br>              /allowAuthorized “0”<br>             }<br>    ```<br><br> | `not cached` |
   | <br><br>    ```<br>    HTTP Request:<br>             GET /content/test.html HTTP/1.1<br>             Cookie: login-token=...<br>             dispatcher.any farm /cache = /allowAuthorized configuration:<br>             /cache {<br>              /allowAuthorized “1”<br>             }<br>    ```<br><br> | `cached` |


7. Hay un parámetro QUERYSTRING en la dirección URL y se permite ignorar el parámetro a través de la CONFIGURACIÓN de FARM /IGNOREURLPARAMS.

   Mensajes de registro relacionados:


   ```
   request contains a query string
   ```



   Ejemplos:


   | Solicitud HTTP:<br><br>    ```<br>    GET /content/test.html?test=1 HTTP/1.1<br>    Farm /cache configuration:<br>    <br>    /ignoreUrlParams {<br>     /0001 { /type “allow” /glob “*” }<br>    }<br>    ```<br><br> | en caché |
   | --- | --- |
   | Solicitud HTTP:<br><br>    ```<br>    GET /content/test.html?test=1 HTTP/1.1<br>    Farm /cache configuration:<br>    <br>    /ignoreUrlParams {<br>     /0001 { /type “deny” /glob “*” } <br>      <br>     /0001 { /type “allow” /glob “test” }<br>    }<br>    ```<br><br> | en caché |
   | Solicitud HTTP:<br><br>    ```<br>    GET /content/test.html?test=1 HTTP/1.1<br>    dispatcher.any farm /cache = /allowAuthorized configuration:<br>    <br>    /ignoreUrlParams {<br>    <br>     /0001 { /type “deny” /glob “*” } <br>      <br>     /0001 { /type “allow” /glob “q” }<br>    }<br>    ```<br><br> | no almacenado |




<b>Reglas de respuesta y almacenamiento en caché HTTP:</b>



La respuesta HTTP devuelta por AEM se puede almacenar en caché si se cumplen los siguientes criterios:

1. Dispatcher puede enviar y recibir una respuesta de 200 OK de uno de los &quot;RENDERS&quot; definidos.

   <b>Nota:</b> Si no [/timeout](https://experienceleague.adobe.com/docs/experience-manager-dispatcher/using/configuring/dispatcher-configuration.html?lang=es) está configurado en /renders o está establecido en 0, entonces esperaría para siempre una conexión con la instancia de AEM aunque la instancia esté baja.
Mensajes de registro relacionados:


   ```
   Unable to send request to remote server. Unable to receive response from remote server. Remote server returned: %s No backend available.
   ```



   Ejemplos:


   | Solicitud HTTP:<br><br>    200 OK | en caché |
   | --- | --- |
   | Solicitud HTTP:<br><br>    404 Página no encontrada | no almacenado |


2. Ninguno de estos encabezados de respuesta está presente en la respuesta:

   - `Dispatcher: no-cache`
   - `Cache-control: no-cache`
   - `Pragma: no-cache`

   Mensajes de registro relacionados:


   ```
   Backend forbids caching: %s, sent: %s" response contains no_cache
   ```



   Ejemplos:


   | Respuesta HTTP:<br><br>    200 OK<br><br>    Dispatcher: no-cache | no almacenado |
   | --- | --- |
   | Respuesta HTTP:<br><br>    200 OK<br><br>    Control de caché: no-cache | no almacenado |
   | Respuesta HTTP:<br><br>    200 OK<br><br>    Pragma: no-cache | no almacenado |
   | Respuesta HTTP:<br><br>    200 OK | en caché |


3. El valor de longitud de contenido es bueno que CERO BYTES.
Mensajes de registro relacionados:


   ```
   response content length is zero
   ```



   Ejemplos:


   | Respuesta HTTP:<br><br>    200 OK<br><br>    Content-Length: 0 | no almacenado |
   | --- | --- |
   | Respuesta HTTP:<br><br>    200 OK<br><br>    Content-Length: 3120 | en caché |



