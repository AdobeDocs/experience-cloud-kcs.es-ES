---
title: "AEM Análisis de volcado de subprocesos"
description: Descripción
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS, prácticas recomendadas, análisis AEM volcado de subprocesos, Adobe Experience Manager, Java, Analizador de subprocesos de IBM"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/thread-dump-analysis.html"
bug: false
article-created-by: Jim Menn
article-created-date: "10/25/2022 2:34:41 AM"
article-published-by: Jim Menn
article-published-date: "10/25/2022 2:39:55 PM"
version-number: 3
article-number: KA-16458
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=6fb11892-0d54-ed11-bba2-6045bd006b4b"
source-git-commit: c75c557dd90af3ac51e113e0a9c61cf1c3de9618
workflow-type: tm+mt
source-wordcount: '1018'
ht-degree: 1%

---

# AEM Análisis de volcado de subprocesos

## Descripción


<b>Entorno</b>
Adobe Experience Manager

<b>Problema</b>
Analizar AEM volcados de subprocesos de Java mediante [Analizador de subprocesos de IBM](https://www.ibm.com/support/pages/ibm-thread-and-monitor-dump-analyzer-java-tmda) herramientas y prácticas recomendadas.


## Resolución


<b>Solución</b>

<u><b>Siga estos pasos y prácticas recomendadas para analizar AEM volcados de subprocesos de Java mediante <a data-ol-has-click-handler="" href="https://www.ibm.com/support/pages/ibm-thread-and-monitor-dump-analyzer-java-tmda">Analizador de subprocesos de IBM</a> herramienta</b></u><b>:</b>

1. Descargar e instalar [Analizador de subprocesos de IBM](https://www.ibm.com/support/pages/ibm-thread-and-monitor-dump-analyzer-java-tmda) (lo llamaremos IBM TDA para abreviar).
2. Captura [volcados de subprocesos](https://helpx.adobe.com/experience-manager/kb/thread-dumps-collection-analysis.html) desde una instancia de AEM que experimenta problemas de rendimiento.
3. Abra los volcados de subprocesos en IBM TDA.
4. Para ver los detalles de un volcado de subprocesos, seleccione el archivo en la lista y haga clic en el botón <b>Detalle del subproceso</b> botón.

   ![tda-threaddetail](https://helpx.adobe.com/content/dam/help/en/experience-manager/kb/thread-dump-analysis/_jcr_content/main-pars/image_1587732783/tda-threaddetail.png "tda-threaddetail")
5. Ordenar por <b>Profundidad de pila</b> con las pilas más largas en la parte superior.

   ![tda-image1](https://helpx.adobe.com/content/dam/help/en/experience-manager/kb/thread-dump-analysis/_jcr_content/main-pars/image/tda-image1.png)
6. Revise los subprocesos con una profundidad de pila de 10 líneas o más.  Normalmente son los hilos de mayor interés.

   Tome nota de los subprocesos que son de interés.
7. Ordenar por subproceso <b>Estado</b>.
8. Desplácese hacia abajo hasta el <b>Ejecutable</b> subprocesos. Los subprocesos ejecutables son los que estaban ocupando activamente el tiempo de CPU cuando se tomó el volcado de subprocesos.

   *Nota: Al revisar la <b>Ejecutable</b> subprocesos, puede ignorar los listados en el [Subprocesos que se pueden ignorar](https://helpx.adobe.com/experience-manager/kb/thread-dump-analysis.html#ignorethreads) en la parte inferior de esta página.*


9. Busque subprocesos ejecutables que formen parte de la aplicación, por ejemplo, subprocesos de trabajo en segundo plano o subprocesos de solicitud (los subprocesos de solicitud tienen nombres como este *127.0.0.1 1347028187737 GET /content/sites/global/en/sitemap.static-delivery.httpd.html HTTP/1.1*).

   Una vez que los encuentre, haga clic en ellos uno por uno.
10. Para cada subproceso de solicitud, puede averiguar cuándo el explorador del usuario realizó la solicitud al servidor mirando la marca de tiempo en el nombre del subproceso.

   Por ejemplo, en el nombre del subproceso anterior, la marca de tiempo (en formato de época de milisegundos unix) es *1347028187737*.

   Podemos convertir ese número de época en una fecha/hora usando [www.epochconverter.com](http://www.epochconverter.com/).

   Cada volcado de subprocesos muestra la fecha y la hora en que se tomó.

   Puede tomar la diferencia de tiempo entre el tiempo de solicitud y el tiempo de volcado de subprocesos para ver durante cuánto tiempo se ha activado una solicitud.
11. Después de revisar los subprocesos de solicitud, desplácese por el otro <b>Ejecutable</b> subprocesos.

   Una vez que haya encontrado un subproceso de interés ejecutable, mire el panel central, <b>Esperando subprocesos</b>.

   Los subprocesos enumerados están esperando a que el subproceso seleccionado libere un monitor.

   Si no ve ningún subproceso en espera, el subproceso seleccionado podría ser el propietario de un [Bloqueo](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html) (consulte implementación de clases de [Bloqueo](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html) para obtener más información).

   Por ejemplo, con un [ReentrantReadWriteLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html) no se puede saber qué subproceso es el soporte de bloqueo, ya que los bloqueos implementan varios monitores internamente.

   Por lo tanto, es posible que tenga que mirar el código fuente para emparejarlo con un subproceso que podría ser el soporte del bloqueo.
12. Si el subproceso tenía un bloqueo o monitor que muchos otros subprocesos estaban esperando, entonces revise el resto de los volcados de subprocesos para ver si puede encontrar otros que tengan el mismo problema.

   Compruebe si el mismo subproceso sigue existiendo en los otros volcados (en IBM TDA puede seleccionar varios volcados de subprocesos y hacer clic en el botón <b>Comparar subprocesos</b> para ver el estado de un subproceso en varios volcados de subprocesos.

   ![tda-comparethreads](https://helpx.adobe.com/content/dam/help/en/experience-manager/kb/thread-dump-analysis/_jcr_content/main-pars/image_1159496390/tda-comparethreads.png)
13. Consulte la <b>Servicio de colección</b> en la captura de pantalla siguiente:

   ![tda-Image2](https://helpx.adobe.com/content/dam/help/en/experience-manager/kb/thread-dump-analysis/_jcr_content/main-pars/image_1730877898/tda-Image2.png)
14. En esta vista puede ver el subproceso en varios volcados de subprocesos para ver si es un subproceso de larga duración.

   Básicamente, si el subproceso está en la variable <b>Ejecutable</b> en varios volcados y tiene una pila larga, lo que normalmente significa que es un subproceso largo en ejecución.
15. Si no encontraste mucho mirando el <b>Ejecutable</b> subprocesos, vuelva a la lista de subprocesos, seleccione un volcado de subprocesos y haga clic en <b>Detalles del monitor</b> en el panel superior.

   IBM TDA abrirá una ventana que mostrará una vista de árbol de los subprocesos propietarios del monitor y sus subprocesos en espera.

   Nota: Es posible que muestre algunos subprocesos del grupo de subprocesos, como el monitor del grupo de subprocesos del motor servlet, los subprocesos inactivos podrían ignorarse.

   Normalmente, se puede decir que un subproceso es un subproceso inactivo porque la mayoría de las veces solo tiene 10 líneas de pila o menos.

   ![tda-monitordetail](https://helpx.adobe.com/content/dam/help/en/experience-manager/kb/thread-dump-analysis/_jcr_content/main-pars/image_1106466084/tda-monitordetail.png)




<u><b>Utilización de CPU a nivel de subprocesos (solo plataforma Linux)</b></u><b>:</b>

1. Si ha capturado `top -H -b -n1 -p javapid` además de volcados de subprocesos, puede hacer referencia cruzada a la utilización de CPU a nivel de subprocesos.

   Abra la salida superior y obtenga el identificador de proceso de los subprocesos que utilizan la CPU.

   Convierta el id de proceso a hexadecimal y, a continuación, busque ese valor hexadecimal en el archivo de volcado de subprocesos correspondiente.

   El id debe coincidir con el <b>nid</b> de uno de los subprocesos.
2. Si el subproceso coincidente que utiliza la mayor cantidad de CPU es la <b>Subproceso VM</b> o <b>GC</b> de este modo, es posible que tenga un problema de memoria.

   Repita el mismo ejercicio para más volcados de subprocesos y salida superior, y si hay un patrón de estos subprocesos que toma tiempo de CPU, tiene un problema de memoria.
3. Si ha confirmado el problema de memoria, capture un volcado de memoria la próxima vez que se produzca el problema.

   Consulte esta [Artículo Analizar problemas de memoria](https://experienceleague.adobe.com/docs/experience-cloud-kcs/kbarticles/KA-17482.html?lang=es) para obtener más información sobre la captura y el análisis de volcados de memoria.


![](https://helpx.adobe.com/libs/cq/ui/resources/0.gif)![](https://helpx.adobe.com/libs/cq/ui/resources/0.gif)

<b><u>Subprocesos que se pueden ignorar</u>:</b>

- Subproceso VM: Este es un subproceso del sistema VM.
- Subprocesos que comienzan con el subproceso de tarea GC: Estos son subprocesos de recolección de basura.
- Subprocesos con nombres similares a los `- 1347028691218 in code at java.net.PlainSocketImpl.socketAccept(Native Method)`: Estos son subprocesos del grupo de subprocesos del motor servlet esperando nuevas conexiones.

