---
title: "El uso del disco es inusualmente alto o está aumentando rápidamente en AEM servidor"
description: Descripción
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager 6.4,Experience Manager 6.5"
keywords: "KCS, AEM, rendimiento, disco lleno"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Nayanika Chakravarty
article-created-date: "5/2/2023 8:37:19 PM"
article-published-by: Nayanika Chakravarty
article-published-date: "5/2/2023 9:42:51 PM"
version-number: 4
article-number: KA-17496
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=104d8e1f-29e9-ed11-a7c6-6045bd006268"
source-git-commit: fcb7ca716bedb896740d73062a29c5552bd5eb2b
workflow-type: tm+mt
source-wordcount: '572'
ht-degree: 6%

---

# El uso del disco es inusualmente alto o está aumentando rápidamente en AEM servidor

## Descripción {#description}


<b>Entorno</b>

Adobe Experience Manager

<b>Problema/Síntomas</b>

El uso del disco es inusualmente alto o está aumentando rápidamente en un servidor AEM. Con el espacio en disco agotado, AEM ha dejado de funcionar.




## Resolución {#resolution}

<b>A. Si se está ejecutando AEM y hay suficiente espacio en disco</b>
1. <b>Configuración del registro de seguimiento de escritura de oak</b>    Si todavía AEM en ejecución, podemos habilitar un registrador de depuración para que nos diga en qué rutas del repositorio se está escribiendo. Para habilitar este registrador, instale el paquete de configuración de registro adjunto a continuación o siga estos pasos:

   1. Vaya a *https://aemhost:port/system/console/slinglog*
   2. Haga clic en <b>Agregar nuevo registrador</b>.
   3. Configurar un registrador: <b>Archivo de registro:</b> logs/repgrowth.log, <b>Nivel de registro</b>: seguimiento, <b>Registradores:</b> org.apache.jackrabbit.oak.jcr.operations.writes
   4. Descargar [file](https://helpx.adobe.com/content/dam/help/en/experience-manager/kb/analyze-unusual-repository-growth/jcr:content/main-pars/download/log_repository_growth-1.zip).        Este paquete contiene la configuración necesaria para la sesión de escritura de registro para Oak. Instale este paquete a través del Administrador de paquetes CRX. Después del periodo del monitor, asegúrese de desinstalar el paquete.

   <b>Precaución</b>

   - El registro incluye información sobre todas las escrituras y detalles de la sesión. Si utiliza este registrador, asegúrese de tener suficiente espacio en disco.
   - Desinstale el paquete de configuración de registro o elimine la configuración de registro después de un breve periodo de tiempo para evitar un mayor consumo de espacio en disco.
2. <b>Ejecutar el informe de uso del disco</b>    También puede aprovechar el informe Uso del disco https://host:port/etc/reports/diskusage.html. Este informe muestra el espacio en disco utilizado por la ruta del repositorio. El informe se puede perforar, lo que permite ver también subárboles.
3. <b>Captura de volcados de subprocesos y realización de perfiles</b>    Después de usar repgrowth.log para tener una idea de qué datos se están escribiendo, podemos obtener información sobre qué código está escribiendo esos datos capturando volcados de subprocesos y ejecutando perfiles de CPU. Visite estas páginas:

   - [Perfiles de CPU](https://experienceleague.adobe.com/docs/experience-cloud-kcs/kbarticles/KA-17499.html?lang=es)
   - [Captura de volcados de subprocesos](https://experienceleague.adobe.com/docs/experience-cloud-kcs/kbarticles/KA-17452.html?lang=es)
   - [Análisis de volcados de subprocesos de AEM](https://experienceleague.adobe.com/docs/experience-cloud-kcs/kbarticles/KA-16458.html?lang=es)

<b>B. Si se ha detenido el AEM y/o el espacio en disco está casi lleno</b>
Si tuvo que detener el AEM para evitar el aumento del espacio en disco, utilice los comandos siguientes para realizar un análisis inicial.

- En la plataforma Linux, aproveche el <b>co</b> para listar todos los directorios bajo <b>crx-quickstart</b> con el tamaño resumido de esos directorios:<br>

   ```
   du -h --max-depth=2 crx-quickstart
   ```
- Uso <b>find</b> y <b>co</b> comandos para buscar archivos modificados recientemente y obtener sus tamaños:

   ```
   find crx-quickstart -type f -mtime 1 -exec du -hs {} \; -print
   ```
- Para buscar archivos grandes en el almacén de datos, puede combinar <b>find</b>, <b>co</b>y <b>file</b> comandos para buscar archivos de más de 100 MB en la variable <b>almacén de datos</b> e identifique automáticamente su tipo de archivo:

   ```
   find crx-quickstart/repository/datastore -type f -size +100M -exec sh -c "du -hs \"{}\"; file \"{}\"" \;
   ```
- Si encuentra que el crecimiento está ocurriendo en la variable <b>segmentstore</b> , el siguiente comando podría ayudar a indicar qué datos se están escribiendo:

   ```
   strings data_xxxxxx.tar | egrep '.?/' | sed 's/.$//;s/.\//\//'
   ```

<b>Causa</b>
Algunas causas potenciales de incrementos inusuales en la utilización del disco son:

- No se ha ejecutado el mantenimiento adecuado en el sistema.  Consulte este artículo para obtener más información sobre las diversas actividades de mantenimiento del sistema.
- AEM o la aplicación está creando un gran número de nodos o actualizaciones en las propiedades del nodo.  Esto puede deberse a una configuración incorrecta o a un error en el código de la aplicación.  Dado que el almacenamiento tar en Oak funciona en modo append-only, el ahorro repetido de nodos contribuye aún más al crecimiento excesivo del repositorio.
- Se han cargado archivos muy grandes en AEM Assets o en el administrador de paquetes.
- El registro de depuración o seguimiento se dejó habilitado.

