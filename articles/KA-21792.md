---
title: "AEM cambios de GraphQL con respecto a la gestión de valores nulos"
description: Descripción
solution: Experience Manager as a Cloud Service
product: Experience Manager as a Cloud Service
applies-to: "Experience Manager as a Cloud Service"
keywords: "KCS,Adobe Experience Manager, GraphQL"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Cedric Latimier
article-created-date: "3/30/2023 9:27:55 AM"
article-published-by: Cedric Latimier
article-published-date: "3/30/2023 9:30:21 AM"
version-number: 3
article-number: KA-21792
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=042e1c21-ddce-ed11-b597-6045bd006a22"
source-git-commit: 29f9f28ad39678997094ddbae1361bedb3a678a0
workflow-type: tm+mt
source-wordcount: '729'
ht-degree: 1%

---

# AEM cambios de GraphQL con respecto a la administración de valores nulos

## Descripción {#description}

<b><u>Cambios en la administración de GraphQL de <em>null</em> values</u></b><br> <br>En la versión 2023.02.11382, se han realizado algunas mejoras en la implementación de GraphQL que podrían provocar un comportamiento inesperado en el código de la aplicación en caso de que se basara en el comportamiento erróneo de las versiones anteriores. 
<br>Las mejoras ayudan a lograr esto AEM GraphQL <b>ahora devuelve contenido con *null* de forma coherente en todas las operaciones de filtrado. </b>

## Resolución {#resolution}

<b><u>CONTAINS_NOT y <em>null</em> values</u></b><br> <br>El primer cambio afecta a las condiciones de filtro que aprovechan el operador CONTAINS_NOT. En versiones anteriores, CONTAINS_NOT no devolvía fragmentos de contenido que contuvieran *null* valores del campo al que se aplicó la condición de filtro. Esto no es coherente con operadores similares como EQUALS_NOT o NOT_AT.<br>Asegúrese de que la aplicación cliente sea capaz de gestionar *null* valores que AEM devuelven al utilizar CONTAINS_NOT.<br> <br><b>Ejemplo:</b>

| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado antes de 2023.02.11382</b> | <b>Resultado a partir de 2023.02.11382</b> |
| --- | --- | --- | --- |
| myField: {<br>    valor: &quot;frag&quot;, <br>    _op: CONTAINS_NOT<br>} | <br>    {<br>        myField: null<br>    }, <br>    {<br>        myField: &quot;Texto&quot;<br>    },<br>    {<br>        myField: &quot;Fragmento de texto&quot;<br>    }<br> | <br>    {<br>        myField: &quot;Texto&quot;<br>    }<br> | <br>    {<br>        myField: null<br>    },<br>    {<br>        myField: &quot;Texto&quot;<br>    }<br> |


<b><u>Aplicar los modos ALL_OR_EMPTY/ALL y <em>null</em> values</u></b>

Otro problema que se corrigió en 2023.02.11382 está relacionado con *null* valores en condiciones de filtro en campos multivalor. El modo Aplicar ALL_OR_EMPTY (en matrices/campos de varios valores) no devolvía fragmentos con *null* para el campo en cuestión, por lo que funcionaba como esperaba para el método de aplicación ALL. Al mismo tiempo, el filtrado de un campo de varios valores con el modo de aplicación ALL incluiría fragmentos con contenido vacío para ese campo, pero no debería. Se recomienda probar las consultas que utilizan uno de estos modos de aplicación y cambiarlas si ya no devuelven el conjunto de resultados esperado en 2023.02.11382.

Tenga en cuenta que el problema solo existía para algunos operadores (antes de 2023.02.11382).
Por ejemplo, EQUALS_NOT funcionó como se esperaba para el método de aplicación ALL_OR_EMPTY, mientras que CONTAINS no lo hizo.
<b>Ejemplo:</b>

| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado antes de 2023.02.11382</b> | <b>Resultado a partir de 2023.02.11382</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _expresiones: {<br>    valor: &quot;1,3&quot;<br>    _operador: EQUALS_NOT<br>    _apply: ALL<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1,1&quot;, &quot;1,2&quot;, &quot;1,3&quot; <br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> |
| myArray: {<br>  _expresiones: {<br>    valor: &quot;2.&quot;<br>    _operador: CONTIENE<br>    _apply: ALL_OR_EMPTY<br>  }<br>} | <br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> |


<b><u>Aplicar modos INSTANCIAS, _instancias: 0 y <em>null</em> values</u></b>

El último problema también está relacionado con *null* valores en condiciones de filtro en campos de varios valores. Modo de aplicación *INSTANCIAS* con *_instancias: 0* no coincidían con los fragmentos de contenido que contenían *null* antes de 2023.02.11382, pero comenzará con 2023.02.11382. Se recomienda probar las consultas que utilizan esta constelación y cambiarlas si no devuelven el resultado esperado establecido en 2023.02.113 82 más.
<b>Ejemplo:</b>

| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado antes de 2023.02.11382</b> | <b>Resultado a partir de 2023.02.11382</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _expresiones: {<br>    valor: &quot;2.&quot;<br>    _operador: CONTIENE<br>    _apply: INSTANCIAS<br>    _instancias: 0<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1,1&quot;, &quot;1,2&quot;, &quot;1,3&quot; <br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: &quot;1,1&quot;, &quot;1,2&quot;, &quot;1,3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1,1&quot;, &quot;1,2&quot;, &quot;1,3&quot; <br>  }<br> |


<b><u>Mejoras que pueden afectar a los clientes con <em>ft-sites-97</em> enabled</u></b>

Clientes que tenían la variable *ft-sites-97 (paginación de GraphQL y filtrado optimizado)* indicador de características habilitado *before* la versión 2023.02.11382 puede experimentar uno o más de los siguientes cambios de comportamiento después de actualizar a 2023.02.11382. Los clientes que no tengan este indicador de característica habilitado no se verán afectados por esta sección

<b>*<u>null </u></b><b>*<u>tratamiento con condiciones que comprueben la falta de igualdad</u></b>

Campos de fragmento con *null* no coincidían de forma intermitente con los filtros que buscaban no igualdad

Si el código depende de que estos fragmentos no se devuelvan, deberá ajustar el código para adaptarse al comportamiento esperado.


| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado de la implementación intermedia</b> | <b>Resultado de la implementación final</b> |
| --- | --- | --- | --- |
| myField: {<br>  valor: &quot;Texto&quot;,<br>  _op: EQUALS_NOT<br>} | <br>  {<br>    myField: null<br>  },<br>  {<br>    myField: &quot;Texto&quot;<br>  },<br>  {<br>    myField: &quot;Fragmento de texto&quot;<br>  }<br> | <br>  {<br>    myField: &quot;Texto&quot;<br>  }<br> | <br>  {<br>    myField: null<br>  },<br>  {<br>    myField: &quot;Texto&quot;<br>  }<br> |


<b><u>Operador de filtro NOT_AT con valores de fecha y hora</u></b>

El operador de filtro NOT_AT no funcionaba correctamente de forma intermitente con los valores de datos/horas. En su lugar, funcionaba más como la condición DESPUÉS. 
Si el código depende del comportamiento incorrecto, debe cambiar la condición de filtro a DESPUÉS.

<b><u>Matrices: INSTANCIAS con _instancias: 0 no funciona correctamente</u></b>

Las INSTANCIAS de condición de filtro (en matrices/campos multivalor) con _instancias configuradas en 0 de forma intermitente no funcionaban como se esperaba, no devolvían nada donde debería haber estado.

Los fragmentos de filtro afectados por este problema tendrían el siguiente aspecto: doubleArray: { _expresiones: { valor: 0, _operador: BUENO, _aplicar: INSTANCIAS, _instancias: 0 }

Si confía en el comportamiento erróneo, debe reescribir la consulta para devolver los mismos resultados que antes.


| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado de la implementación intermedia</b> | <b>Resultado de la implementación final</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _expresiones: {<br>    valor: 20<br>    _operador: IGUAL<br>    _apply: INSTANCIAS<br>    _instancias: 0<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: 10, 20, 30 <br>  },<br>  {<br>    myArray: 11, 12, 13 <br>  }<br> |  | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: 11, 12, 13 <br>  }<br> |

