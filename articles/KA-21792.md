---
title: "Cambios en el manejo de GraphQL de valores nulos | AEM"
description: Descripción
solution: Experience Manager as a Cloud Service
product: Experience Manager as a Cloud Service
applies-to: "Experience Manager as a Cloud Service"
keywords: "KCS, Adobe Experience Manager, GraphQL"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Amol Mahajan
article-created-date: "4/12/2023 12:07:13 PM"
article-published-by: Amol Mahajan
article-published-date: "4/12/2023 2:31:09 PM"
version-number: 4
article-number: KA-21792
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=d2dcaa8a-2ad9-ed11-a7c7-6045bd006149"
source-git-commit: 593863eda118505df324baf4ba5a89d9e5f4a805
workflow-type: tm+mt
source-wordcount: '692'
ht-degree: 1%

---

# Cambios en la administración de GraphQL de valores nulos | AEM

## Descripción {#description}

<b>Entorno</b><br><br>Experience Manager as a Cloud Service<br><br> <br><br><b>Problema/Síntomas</b><br><br>En la versión 2023.02.11382, se han realizado algunas mejoras en la variable <b>GraphQL</b> (Lenguaje de consulta de código abierto) que podría provocar un comportamiento inesperado en el código de la aplicación, en caso de que dependiera del comportamiento erróneo de las versiones anteriores. 
<br>La resolución que se indica a continuación ayuda a lograr que Adobe Experience Manager (AEM) GraphQL devuelva contenido con *null* de forma coherente en todas las operaciones de filtrado. <br>

## Resolución {#resolution}

`CONTAINS_NOT` y *null* values<br> <br>El primer cambio afecta a las condiciones de filtro que aprovechan la variable `CONTAINS_NOT` operador. En versiones anteriores, esta `CONTAINS_NOT` no devolvía fragmentos de contenido que contuvieran *null* valores del campo al que se aplicó la condición de filtro. Esto no es coherente con operadores similares como `EQUALS_NOT` o `NOT_AT`.<br>Asegúrese de que la aplicación cliente sea capaz de gestionar *null* valores que devuelve AEM al usar `CONTAINS_NOT`.<br> <br><b>Ejemplo:</b>

| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado antes de 2023.02.11382</b> | <b>Resultado a partir de 2023.02.11382</b> |
| --- | --- | --- | --- |
| myField: {<br>    valor: &quot;frag&quot;, <br>    _op: CONTAINS_NOT<br>} | <br>    {<br>        myField: null<br>    }, <br>    {<br>        myField: &quot;Texto&quot;<br>    },<br>    {<br>        myField: &quot;Fragmento de texto&quot;<br>    }<br> | <br>    {<br>        myField: &quot;Texto&quot;<br>    }<br> | <br>    {<br>        myField: null<br>    },<br>    {<br>        myField: &quot;Texto&quot;<br>    }<br> |

<br>Aplicar modos `ALL_OR_EMPTY/ALL` y *null* values<br>
Otro problema que se corrigió en 2023.02.11382 está relacionado con *null* valores en condiciones de filtro en campos multivalor. Modo de aplicación `ALL_OR_EMPTY` (en matrices/campos de varios valores) no devolvía fragmentos con *null* para el campo en cuestión, por lo que funcionaba como esperaba para el `ALL` método apply . Al mismo tiempo, filtrado de un campo de varios valores con el modo de aplicación `ALL` incluiría fragmentos con contenido vacío para ese campo, pero no debería. Se recomienda probar las consultas que utilizan uno de estos modos de aplicación y cambiarlas si ya no devuelven el conjunto de resultados esperado en 2023.02.11382.

Tenga en cuenta que el problema solo existía para algunos operadores (antes de 2023.02.11382).
Por ejemplo: `EQUALS_NOT` funcionó según lo esperado para el método de aplicación `ALL_OR_EMPTY`, `CONTAINS` no.
<b>Ejemplo:</b>

| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado antes de 2023.02.11382</b> | <b>Resultado a partir de 2023.02.11382</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _expresiones: {<br>    valor: &quot;1,3&quot;<br>    _operador: EQUALS_NOT<br>    _apply: ALL<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1,1&quot;, &quot;1,2&quot;, &quot;1,3&quot; <br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> |
| myArray: {<br>  _expresiones: {<br>    valor: &quot;2.&quot;<br>    _operador: CONTIENE<br>    _apply: ALL_OR_EMPTY<br>  }<br>} | <br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> |

<br>Aplicar modos: `INSTANCES`, `_instances: 0` y *null* values<br>
El último problema también está relacionado con *null* valores en condiciones de filtro en campos de varios valores. Modo de aplicación `INSTANCES` con`_instances: 0` no coincidían con los fragmentos de contenido que contenían *null* antes de 2023.02.11382, pero comenzará con 2023.02.11382. Se recomienda probar las consultas que utilicen esta constelación y cambiarlas si no devuelven el resultado esperado establecido en 2023.02.113 82 más.
<b>Ejemplo:</b>

| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado antes de 2023.02.11382</b> | <b>Resultado a partir de 2023.02.11382</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _expresiones: {<br>    valor: &quot;2.&quot;<br>    _operador: CONTIENE<br>    _apply: INSTANCIAS<br>    _instancias: 0<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1,1&quot;, &quot;1,2&quot;, &quot;1,3&quot; <br>  },<br>  {<br>    myArray: &quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray: &quot;1,1&quot;, &quot;1,2&quot;, &quot;1,3&quot; <br>  }<br> | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: &quot;1,1&quot;, &quot;1,2&quot;, &quot;1,3&quot; <br>  }<br> |

<br>Mejoras que pueden afectar a los clientes con `ft-sites-97` enabled<br>
Clientes que tenían la variable `ft-sites-97`*(paginación de GraphQL y filtrado optimizado)* indicador de características habilitado *before*la versión 2023.02.11382 puede experimentar uno o más de los siguientes cambios de comportamiento después de actualizar a 2023.02.11382. Los clientes que no tengan este indicador de característica habilitado no se verán afectados por esta sección.
<br>gestión nula con condiciones que comprueban la no igualdad<br>
Campos de fragmento con *null* no coincidían de forma intermitente con los filtros que buscaban no igualdad.

Si el código depende de que estos fragmentos no se devuelvan, deberá ajustar el código para adaptarse al comportamiento esperado.


| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado de la implementación intermedia</b> | <b>Resultado de la implementación final</b> |
| --- | --- | --- | --- |
| myField: {<br>  valor: &quot;Texto&quot;,<br>  _op: EQUALS_NOT<br>} | <br>  {<br>    myField: null<br>  },<br>  {<br>    myField: &quot;Texto&quot;<br>  },<br>  {<br>    myField: &quot;Fragmento de texto&quot;<br>  }<br> | <br>  {<br>    myField: &quot;Texto&quot;<br>  }<br> | <br>  {<br>    myField: null<br>  },<br>  {<br>    myField: &quot;Texto&quot;<br>  }<br> |

<br>Operador de filtro `NOT_AT` con valores de fecha y hora<br>
Operador de filtro `NOT_AT` no funcionaba correctamente de forma intermitente con los valores de datos/horas. En su lugar, funcionaba más como el `AFTER` condición. 
Si el código se basa en un comportamiento incorrecto, debe cambiar la condición de filtro a `AFTER`.
<br>Matrices: `INSTANCES` con `_instances: 0` no funciona correctamente<br>
Condición de filtro `INSTANCES` (en matrices/campos multivalor) con `_instances` configurado en 0 de forma intermitente no funcionaba como se esperaba, no devolvía nada donde debería haber estado.

Los fragmentos de filtro afectados por este problema tendrían el siguiente aspecto: `doubleArray: { _expressions: { value: 0, _operator: GREATER, _apply: INSTANCES, _instances: 0 } }`

Si confía en el comportamiento erróneo, debe reescribir la consulta para devolver los mismos resultados que antes.


| <b>Filtrar fragmento</b> | <b>Datos</b> | <b>Resultado de la implementación intermedia</b> | <b>Resultado de la implementación final</b> |
| --- | --- | --- | --- |
| myArray: {<br>  _expresiones: {<br>    valor: 20<br>    _operador: IGUAL<br>    _apply: INSTANCIAS<br>    _instancias: 0<br>  }<br>} | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: 10, 20, 30 <br>  },<br>  {<br>    myArray: 11, 12, 13 <br>  }<br> |  | <br>  {<br>    myArray: null<br>  },<br>  {<br>    myArray: 11, 12, 13 <br>  }<br> |

